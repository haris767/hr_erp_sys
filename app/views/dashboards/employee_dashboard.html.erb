<div class="row text-center mb-4">
  <div class="col-md-4">
    <div class="card bg-info text-white">
      <div class="card-body">
        <h5>Leaves Taken</h5>
        <h2><%= @leaves_taken %></h2>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card bg-info text-white">
      <div class="card-body">
        <h5>Attendances</h5>
        <h2><%= @user.attendances.count %></h2>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card bg-secondary text-white">
      <div class="card-body">
        <h5>Latest Salary</h5>
        <h2>$<%= number_to_currency(@latest_salary, precision: 2, unit: '') %></h2>
      </div>
    </div>
  </div>
</div>

<h2>Welcome, <%= @user.name %>!</h2>
<p>Your role: <%= @user.roles.map(&:name).join(', ') %></p>
<%
  max_allowed_lates = 3
  late_count = @user.attendances.where(late_status: true).count
  late_chances_left = [max_allowed_lates - late_count, 0].max
%>

<% if late_chances_left < max_allowed_lates %>
  <div class="alert alert-warning">
    ⚠️ You have <strong><%= late_chances_left %></strong> late chance(s) left before salary deduction.
  </div>
<% end %>




<div class="card mt-3">
  <div class="card-body">
    <h5>Your Info</h5>
    <ul>
      <li>Email: <%= @user.email %></li>
      <li>Employee Code: <%= @user.user_info&.employee_code %></li>
      <li>Phone: <%= @user.user_info&.phone %></li>
      <!-- Add more fields as needed -->
    </ul>
  </div>
</div>