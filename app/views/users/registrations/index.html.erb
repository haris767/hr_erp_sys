<h2>All Users</h2>
<div class="row mb-4">
  <div class="col-md-12">
   <%= form_with url: admin_user_list_path, method: :get, local: true do |f| %>
  <div class="input-group">
    <%= f.text_field :query, value: params[:query], placeholder: "Search users by name or email", class: "form-control" %>
    <div class="input-group-append">
      <button class="btn btn-outline-secondary" type="submit">
        <i class="fas fa-search"></i> Search
      </button>
    </div>
  </div>
<% end %>

  </div>
</div>
<% if @users.any? %>
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h3 class="card-title">User List</h3>
      <% if user_signed_in? %>
      <%= link_to "âž• Create New User", new_user_by_admin_path, class: "btn btn-success btn-sm" %>
      <div class="d-flex justify-content-end mb-3">
      <%= link_to roles_path, class: "btn btn-app bg-primary text-white" do %>
        <i class="fas fa-user-shield"></i> Manage Roles
      <% end %>
      </div>

      <%end%>
    </div>

    <div class="card-body p-0">
      <table class="table table-striped table-hover table-bordered mb-0">
        <thead class="thead-dark">
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Created</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td><%= user.name %></td>
              <td><%= user.email %></td>
              <td>
                <%= user.roles.pluck(:name).join(", ") %>
              </td>
              <td><%= user.created_at.to_date %></td>
              <% if user_signed_in? %>
              <td>
                <%= link_to "Edit", edit_user_path(user), class: "btn btn-warning btn-sm" %>
                <%= link_to "Profile", user_profile_path, class: "btn btn-info btn-sm" %>
                <%= button_to "Delete", destroy_user_account_path(user.id), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger btn-sm" %>
              </td>
              <%end%>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% else %>
  <div class="alert alert-warning mt-3">
    No users found for "<%= params[:query] %>"
  </div>
<% end %>
